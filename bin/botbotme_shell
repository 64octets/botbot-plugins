#!/usr/bin/env python
import os
from importlib import import_module
from botbotme_plugins.base import app
import botbotme_plugins.plugins


def import_plugins(modules=None):
    modules = modules or []
    if not modules:
        plugins_dir = os.path.join(os.path.dirname(botbotme_plugins.plugins.__file__))
        for module in os.listdir(plugins_dir):
            if module == '__init__.py' or module[-3:] != '.py':
                continue
            modules.append(module[:-3])
    for mod in modules:
        import_module('botbotme_plugins.plugins.' + mod)

if __name__ == '__main__':
    import_plugins()
    app.cmdloop()